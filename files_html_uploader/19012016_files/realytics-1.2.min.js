!function(RY){function onDomLoaded(){try{onDomLoaded.set||(onDomLoaded.set=!0,_binder.bindAllActionsEvent())}catch(a){_logger.error("Failed to bind tracker actions on DOM loaded.",a)}}function onDomScrolled(){try{onDomScrolled.set||(onDomScrolled.set=!0,_binder.bindAllActionsScroll())}catch(a){_logger.error("Failed to bind tracker actions on DOM scrolled.",a)}}if(!RY||!RY._v){var RY=RY||{};RY._v=1;var _settings={COOKIE_DAYS_DURATION:365,COOKIE_SUBDOMAIN_ENABLED:!0,DEBUG_ENABLED:!0,ALERT_ENABLED:!1,HTTP_PROTOCOL:document&&document.location&&document.location.protocol&&"https:"==document.location.protocol?"https://":"http://",HTTPS_ENABLED:!0,URI_ZONES:{EU:{API:"api.realytics.io",API_MOBILE:"m.realytics.io",XDM:"x.realytics.io",SYNC_USER:"tc-sync.realytics.io",SYNC_SESSION:"tp.realytics.io"},US:{API:"api-us-we.realytics.net",API_MOBILE:"api-us-we.realytics.net",XDM:"api-us-we.realytics.net",SYNC_USER:"api-us-we.realytics.net",SYNC_SESSION:"api-us-we.realytics.net"},PA:{API:"api-pa-ce.realytics.net",API_MOBILE:"api-pa-ce.realytics.net",XDM:"api-pa-ce.realytics.net",SYNC_USER:"api-pa-ce.realytics.net",SYNC_SESSION:"api-pa-ce.realytics.net"},SA:{API:"api.realytics.io",API_MOBILE:"m.realytics.io",XDM:"x.realytics.io",SYNC_USER:"tc-sync.realytics.io",SYNC_SESSION:"tp.realytics.io"}},URI_STREAMROOT:"streamroot.realytics.io",LOGGER_ENABLED:!0,LOGGER_API_ENABLED:!1,XDM_ENABLED:!1,SYNC_USER_ENABLED:!0,SYNC_USER_TC_ENABLED:!0,SYNC_USER_EU_ENABLED:!0,SYNC_SESSION_ENABLED:!0,MAIN_INSTANCE:"realytics",OPTOUT_TIMEOUT:100,EVENT_TRACK_TIMEOUT:300,XDM_TIMEOUT:5e3,USER_DAYS_DURATION:365,SESSION_MINUTES_DURATION:30,URL_MAX_SIZE:2048,PAGE_HACK:!0},_={};_.getTypeString=function(a){return Object.prototype.toString.call(a)},_.getTime=function(){return Math.round((new Date).getTime())},_.isNative=function(a){var b=RegExp("^"+String(toString).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$");return"function"==typeof a&&b.test(a)},_.isArray=_.isNative(Array.isArray)?Array.isArray:function(a){return!(!a||"object"!=typeof a||"number"!=typeof a.length||"[object Array]"!=_.getTypeString(a))},_.isArrayNullOrEmpty=function(a){return!a||a.length<1},_.isDate=function(a){return!(!a||"object"!=typeof a||"[object Date]"!=_.getTypeString(a))},_.isFunction=function(a){return"function"==typeof a},_.isFunction(/x/)&&(_.isFunction=function(a){return"function"==typeof a&&"[object Function]"==_.getTypeString(a)}),_.isNull=function(a){return null===a},_.isNumber=function(a){return!!("number"==typeof a||a&&"object"==typeof a&&"[object Number]"==_.getTypeString(a))},_.isObject=function(a){return!(!a||"function"!=typeof a&&"object"!=typeof a)},_.isDomElement=function(a){return _.isObject(a)&&a.nodeType},_.isString=function(a){return!!("string"==typeof a||a&&"object"==typeof a&&"[object String]"==_.getTypeString(a))},_.isUndefined=function(a){return"undefined"==typeof a},_.extend=function(a,b){if(a=a&&_.isObject(a)?a:{},b&&_.isObject(b))for(var c in b)a[c]=b[c];return a},_.reduce=function(a,b){var c;if("string"==typeof a)c=a.slice(0,b);else if(_.isArray(a)){c=[];for(var d=0;d<a.length;d++)c.push(_.reduce(a[d],b))}else if(_.isObject(a)){c={};for(var e in a)c[e]=_.reduce(a[e],b)}else c=a;return c},_.json=function(){return"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(a){return a<10?"0"+a:a}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,h,g=gap,i=b[a];switch(i&&"object"==typeof i&&"function"==typeof i.toJSON&&(i=i.toJSON(a)),"function"==typeof rep&&(i=rep.call(b,a,i)),typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";if(gap+=indent,h=[],"[object Array]"===Object.prototype.toString.apply(i)){for(f=i.length,c=0;c<f;c+=1)h[c]=str(c,i)||"null";return e=0===h.length?"[]":gap?"[\n"+gap+h.join(",\n"+gap)+"\n"+g+"]":"["+h.join(",")+"]",gap=g,e}if(rep&&"object"==typeof rep)for(f=rep.length,c=0;c<f;c+=1)"string"==typeof rep[c]&&(d=rep[c],e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e));else for(d in i)Object.prototype.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e));return e=0===h.length?"{}":gap?"{\n"+gap+h.join(",\n"+gap)+"\n"+g+"}":"{"+h.join(",")+"}",gap=g,e}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(a,b,c){var d;if(gap="",indent="","number"==typeof c)for(d=0;d<c;d+=1)indent+=" ";else"string"==typeof c&&(indent=c);if(rep=b,b&&"function"!=typeof b&&("object"!=typeof b||"number"!=typeof b.length))throw new Error("JSON.stringify");return str("",{"":a})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&"object"==typeof e)for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(d=walk(e,c),void 0!==d?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),{stringify:function(a){return JSON.stringify(a)},parse:function(a){return JSON.parse(a)},encode:function(a){return JSON.stringify(a)},decode:function(a){return JSON.parse(a)}}}(),_.base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(a){var c,d,e,f,g,h,i,b="",j=0;a=_.utf8.encode(a);for(var k=a.length;j<k;)c=j<k?a.charCodeAt(j++):null,d=j<k?a.charCodeAt(j++):null,e=j<k?a.charCodeAt(j++):null,f=c>>2,g=(3&c)<<4|(null!==d?d>>4:0),h=null!==d?(15&d)<<2|(null!==e?e>>6:0):64,i=null!==e?63&e:64,b=b+this._keyStr.charAt(f)+this._keyStr.charAt(g)+this._keyStr.charAt(h)+this._keyStr.charAt(i);return b},decode:function(a){var c,d,e,f,g,h,i,b="",j=0;for(a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");j<a.length;)f=this._keyStr.indexOf(a.charAt(j++)),g=this._keyStr.indexOf(a.charAt(j++)),h=this._keyStr.indexOf(a.charAt(j++)),i=this._keyStr.indexOf(a.charAt(j++)),c=f<<2|g>>4,d=(15&g)<<4|h>>2,e=(3&h)<<6|i,b+=String.fromCharCode(c),64!=h&&(b+=String.fromCharCode(d)),64!=i&&(b+=String.fromCharCode(e));return b=_.utf8.decode(b)}},_.utf8={encode:function(a){a=a.replace(/\r\n/g,"\n");for(var b="",c=0;c<a.length;c++){var d=a.charCodeAt(c);d<128?b+=String.fromCharCode(d):d>127&&d<2048?(b+=String.fromCharCode(d>>6|192),b+=String.fromCharCode(63&d|128)):(b+=String.fromCharCode(d>>12|224),b+=String.fromCharCode(d>>6&63|128),b+=String.fromCharCode(63&d|128))}return b},decode:function(a){for(var b="",c=0,d=c1=c2=0;c<a.length;)d=a.charCodeAt(c),d<128?(b+=String.fromCharCode(d),c++):d>191&&d<224?(c2=a.charCodeAt(c+1),b+=String.fromCharCode((31&d)<<6|63&c2),c+=2):(c2=a.charCodeAt(c+1),c3=a.charCodeAt(c+2),b+=String.fromCharCode((15&d)<<12|(63&c2)<<6|63&c3),c+=3);return b}},_.ryEncoder={encode:function(a){var b=function(a){var b=function(a){return a<10?"0"+a:a},c=null;return a?(c=""+b(a.getUTCFullYear()),c+="-"+b(a.getUTCMonth()+1),c+="-"+b(a.getUTCDate()),c+="T"+b(a.getUTCHours()),c+=":"+b(a.getUTCMinutes()),c+=":"+b(a.getUTCSeconds())):null},c=function(a){if(!_.isUndefined(a)&&a)if(_.isDate(a))a=b(a);else if(_.isArray(a)&&a.length>0)for(var d=0;d<a.length;d++)a[d]=c(a[d]);else if(_.isObject(a))for(var e in a)if(_.isDate(a[e]))a[e]=b(a[e]);else if(_.isArray(a[e])&&a[e]&&a[e].length>0)for(var d=0;d<a[e].length;d++)a[e][d]=c(a[e][d]);else!_.isObject(a[e])||a.typeOf&&a[e]&&a[e]==a.typeOf||(a[e]=c(a[e]));return a},d=a?_.json.encode(c(a)):null,e=d?_.base64.encode(d):null;return e},decode:function(a){var b=a?_.base64.decode(a):null,c=b?_.json.decode(b):null;return c}},_.domain={_current:document.location?document.location.hostname:null,getInfo:function(a){return a&&a==_.noOvrd?_.domain._current:a}},_.url={_current:document.location?document.location.href:null,getInfo:function(a){return a&&a==_.noOvrd?_.url._current:a},getParamValue:function(a,b){b=b.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var c=new RegExp("[\\?&]"+b+"=([^&#]*)"),d=c.exec(a);return null===d||d.length<2||!d[1]?"":decodeURIComponent(d[1]).replace(/\+/g," ")}},_.campaign={_parameters:["utm_source","utm_medium","utm_campaign","utm_content","utm_term","xtor"],_getCampaign:function(a){for(var b={},c=0,d=_.campaign._parameters,e=0;e<d.length;e++){var f=d[e],g=a?_.url.getParamValue(a,f):null;g&&""!=g&&(b[f]=g,c++)}return c<1?null:b},getInfo:function(a){return _.campaign._getCampaign(a)}},_.env={_ua:navigator?navigator.userAgent:null,_cache:{browser:null,os:null,device:null,mobile:null},isBot:!(!navigator||!/(googlebot|mediapartners|bingpreview|baiduspider|yandexbot|google web preview)/i.test(navigator.userAgent)),_uaMatch:function(a){return a.test(_.env._ua)},_uaContains:function(a){return _.env._ua.indexOf(a)!=-1},getBrowser:function(){if(null==_.env._cache.browser){var a=navigator.vendor||"",b=null,c=_.env._uaContains,d=_.env._uaMatch;b=c("Firefox")||d(/firefox/i)?"MozillaFirefox":c("MSIE")||d(/(msie|trident)/i)?"InternetExplorer":c("Chrome")||d(/chrome/i)?c("Android")||d(/crios/i)?"ChromeMobile":"Chrome":a&&a.indexOf("Apple")!=-1||d(/safari/i)&&!d(/phantom/i)?c("Mobile")?"SafariMobile":"Safari":window&&window.opera||d(/opera/i)||d(/opr/i)?c("Mini")?"OperaMini":"Opera":c("Gecko")?"MozillaGecko":d(/seamonkey\//i)?"SeaMonkey":d(/(BlackBerry|PlayBook|BB10)/i)?"BlackBerry":c("Konqueror")?"Konqueror":"",_.env._cache.browser=b}return""==_.env._cache.browser?null:_.env._cache.browser},getOs:function(){if(null==_.env._cache.os){var a=_.env._uaMatch,b=null;b=a(/Windows/i)?a(/Phone/)?"WindowsMobile":"Windows":a(/Mac/i)?"MacOS":a(/Linux/)?"Linux":a(/Unix/)?"Unix":a(/(iPhone|iPad|iPod)/)?"iOS":a(/Android/)?"Android":a(/(BlackBerry|PlayBook|BB10)/i)?"BlackBerry":"",_.env._cache.os=b}return""==_.env._cache.os?null:_.env._cache.os},getDevice:function(){if(null==_.env._cache.device){var a=_.env._uaMatch,b=null;b=a(/iPhone/)?"iPhone":a(/iPad/)?"iPad":a(/iPod/)?"iPod":a(/(BlackBerry|PlayBook|BB10)/i)?"BlackBerry":a(/Windows Phone/i)?"WindowsPhone":a(/Android/)?"AndroidDevice":null,_.env._cache.device=b}return""==_.env._cache.device?null:_.env._cache.device},isMobile:function(){if(null==_.env._cache.mobile){var a=!1;try{a=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i.test(navigator.userAgent||navigator.vendor||window.opera)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test((navigator.userAgent||navigator.vendor||window.opera).substr(0,4))}catch(b){a=!1}_.env._cache.mobile=!!a}return null==_.env._cache.mobile?null:_.env._cache.mobile},getInfo:function(){if(_.env._ua){var a={},b=_.env.getBrowser(),c=_.env.getDevice(),d=_.env.getOs(),e=_.env.isMobile();return b&&(a.browser=b),c&&(a.device=c),d&&(a.os=d),a.mobile=e,a}return null}},_.noOvrd=-1,_.referrer={_current:document?document.referrer:null,_top:function(){var a=null;try{a=window&&window.top&&window.top.document?window.top.document.referrer:null}catch(b){a=null}return a}(),getInfo:function(a,b,c){var d=_.referrer;if(!b||b!=_.noOvrd)return b;if(c){var e=!1;try{e=window.self!==window.top}catch(a){e=!0}try{var f=e?d._top:d._current;return f}catch(a){return null}}else try{return d._current}catch(a){return null}}},_.searchEngine={_dico:{Google:{d:"google.([^/?]*)",p:"q",e:["email.google.([^/?]*)","storage.googleapis.([^/?]*)"]},Yahoo:{d:"yahoo.com",p:"p"},Bing:{d:"bing.com",p:"q"},Baidu:{d:"baidu.com",p:"wd"},Aol:{d:"aol.([^/?]*)",p:"q"},Ask:{d:"ask.com",p:"q"},Daum:{d:"daum.net",p:"q"},Dogpile:{d:"dogpile.com",p:"q"},Duckduckgo:{d:"duckduckgo.com",p:"q"},Lycos:{d:"lycos.([^/?]*)",p:"q"},Mynet:{d:"mynet.com",p:"query"},Naver:{d:"naver.com",p:"query"},Rambler:{d:"rambler.ru",p:"query"},Search:{d:"search.com",p:"q"},Seznam:{d:"seznam.cz",p:"q"},Virgilio:{d:"virgilio.it",p:"qs"},Voila:{d:"voila.fr",p:"kw"},WpPl:{d:"wp.pl",p:"q"},Yandex:{d:"yandex.com",p:"text"},Yam:{d:"yam.com",p:"k"}},_getEngine:function(a){var b=_.searchEngine,c=null;if(a)for(var d in b._dico)if(0==a.search("https?://(.*)"+b._dico[d].d)){var e=!0;if(b._dico[d].e)for(var f=0;f<b._dico[d].e.length;f++)if(0==a.search("https?://"+b._dico[d].e[f])){e=!1;break}e&&(c=d);break}return c?c:null},_getQuery:function(a,b){var c=_.searchEngine,d=null,e=b?c._dico[b].p:null,f=e?_.url.getParamValue(a,e):null;return d=f&&f.length>0?f:null,d?d:null},getInfo:function(a,b){var c=_.searchEngine._getEngine(b);if(c){var d=_.searchEngine._getQuery(a,c),e={engine:c};return d&&(e.query=d),e}return null}},_.getUIID=function(){function b(){for(var e,b=a,c=new Array(36),d=0,f=0;f<36;f++)8==f||13==f||18==f||23==f?c[f]="-":14==f?c[f]="4":(d<=2&&(d=33554432+16777216*Math.random()|0),e=15&d,d>>=4,c[f]=b[19==f?3&e|8:e]);return c.join("")}var a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");return b}();var _logger=function(a,b){var c=null,d=function(c,d){try{var e=!(!b.LOGGER_API_ENABLED||a.isUndefined(window.RYlogger)||!window.RYlogger||!window.RYlogger.push);if(b.LOGGER_ENABLED&&(e||!a.isUndefined(window.console)&&window.console&&window.console.log)){var f=function(b){e?window.RYlogger.push({text:b,level:d,domain:document.location?document.location.hostname:null,browser:a.env.getBrowser(),device:a.env.getDevice(),os:a.env.getOs(),mobile:a.env.isMobile()}):window.console.log(b)};e||!d||"error"!=d&&"fatal"!=d||(f=function(a){window.console.error?window.console.error(a):window.console.log(a)}),!e&&d&&"warn"==d&&(f=function(a){window.console.warn?window.console.warn(a):window.console.log(a)}),c&&(f("["+d.toUpperCase()+"] "+c.toString()),b.ALERT_ENABLED&&(!a.isUndefined(window.console)&&window.console&&window.console.log&&window.console.log("["+d.toUpperCase()+"] "+c.toString()),!a.isUndefined(alert)&&alert&&alert("["+d.toUpperCase()+"] "+c.toString())))}}catch(a){}},e=function(a,b,c){var e=a?a:null;b&&(e+="\n[Exception] "+(b.name&&(b.message||b.description)?(b.name?"["+b.name+"] ":"")+(b.message?b.message:"")+(!b.message&&b.description?b.description:""):b.toString())),d(e,c)},f={};return f.setUserId=function(d){if(d){c=d;try{b.LOGGER_API_ENABLED&&!a.isUndefined(window.trackJs)&&window.trackJs&&window.trackJs.configure&&window.trackJs.configure({userId:c})}catch(a){}}},f.trace=function(a){b.DEBUG_ENABLED&&d(a,"trace")},f.debug=function(a){b.DEBUG_ENABLED&&d(a,"debug")},f.info=function(a){d(a,"info")},f.warn=function(a){d(a,"warn")},f.error=function(a,b){e(a,b,"error")},f.fatal=function(a,b){e(a,b,"fatal")},f}(_,_settings),_listener=function(a,b){var c=function(b,c,d){return function(e){e=e||(window?window.event:null);var f=!0;try{e&&(f=!d||!a.isFunction(d)||d(e))}catch(a){_logger.error("Failed to exec old handler.",a),f=!0}var g=c.call(b,e);return!(!a.isUndefined(f)&&f===!1||!a.isUndefined(g)&&g===!1)}},d=function(a,b,c){return!!(a&&b&&c&&a.addEventListener)&&(a.addEventListener(b,function(b){return c(a,b)},!1),!0)},e=function(a,b,d){return!!(a&&b&&d&&a.attachEvent)&&(a.attachEvent("on"+b,c(a,d)),!0)},f=function(a,b,d){if(d){var e="on"+b;return a[e]=c(a,d,a[e]),!0}},g=function(a,b,c){return!!(a&&b&&c&&(d(a,b,c)||e(a,b,c)||f(a,b,c)))},h={};return h.onLoadedDone=!1,h.onScrolledDone=!1,h.onEvent=function(a,b,c){return g(a,b,c)},h.onScrolled=function(a){var b=function(){h.onScrolledDone||(h.onScrolledDone=!0,a())};g(window,"scroll",b),g(window,"touchmove",b)},h.onLoaded=function(b){function i(){try{document.documentElement.doScroll("left")}catch(a){return void setTimeout(i,10)}f()}var c=document,f=function(){h.onLoadedDone=!0,b()};if(c)if(c.addEventListener)c.readyState&&"complete"==c.readyState?f():d("DOMContentLoaded",f,!1);else if(c.attachEvent){e(c,"readystatechange",function(){c.readyState&&"complete"==c.readyState&&f()});try{window&&!a.isUndefined(window.frameElement)&&window.frameElement&&!a.isUndefined(c.documentElement)&&c.documentElement&&c.documentElement.doScroll&&i()}catch(a){}}return g(window,"load",f),!0},h}(_,_settings),_selector=function(a,b){var c=function(b,c){var e=null;return b&&(c&&a.isString(b)||(a.isDomElement(b)?e=[b]:c&&a.isObject(b)&&b.length&&(e=d(b,!0)))),e&&e.length>0?e:null},d=function(b,d){var e=null;if(b)if(e=[],a.isArray(b)||d)for(var f=0;f<b.length;f++){var g=c(b[f],!d);g&&(e=e.concat(g))}else{var g=c(b,!0);g&&(e=e.concat(g))}return e&&e.length>0?e:null},e={};return e.getDomElements=function(a){try{return d(a)}catch(a){return _logger.error("Failed to get dom elements.",a),null}},e}(_,_settings),Locker=function(){this._queue=[],this._locked=!1};Locker.prototype._exec=function(a){var b=this,c=this._queue.length>0?this._queue.shift():null;c?c(function(){b._exec(a)}):a()},Locker.prototype.lock=function(a){var b=this;b._queue.push(a),b._locked||(b._locked=!0,b._exec(function(){b._locked=!1}))};var _cookie=function(a,b){var c=["ac.uk","co.uk","org.uk","me.uk","ltd.uk","plc.uk","net.uk","sch.uk","gov.uk","mod.uk","mil.uk","nhs.uk","police.uk","ac.nz","co.nz","geek.nz","gen.nz","kiwi.nz","maori.nz","net.nz","org.nz","school.nz","cri.nz","govt.nz","health.nz","iwi.nz","mil.nz","parliament.nz"],d=function(a,d,e){var f=new Date;f.setTime(e);var g=f.toGMTString(),h=d?encodeURIComponent(d):"",i="";if(b.COOKIE_SUBDOMAIN_ENABLED){var j=document&&document.location&&document.location.hostname?document.location.hostname:null,k=j?j.split("."):null,l=k&&k.length>0?k[k.length-1]:null;if(l=l&&k.length>1?k[k.length-2]+"."+l:l,l&&k.length>2)for(var m=0;m<c.length;m++)if(0==l.toLowerCase().indexOf(c[m])){l=k[k.length-3]+"."+l;break}var n=l?l:null;i=n?"; domain=."+n:""}return!!document&&(document.cookie=a+"="+h+"; expires="+g+"; path=/"+i,!0)},e=function(a){var b=a+"=",c=document&&document.cookie?document.cookie.split(";"):null;if(c)for(var d=0;d<c.length;d++){for(var e=c[d];" "==e.charAt(0);)e=e.substring(1,e.length);if(0==e.indexOf(b)){var f=e.substring(b.length,e.length);return f?decodeURIComponent(f):null}}return null},f=function(b){return d(b,"",a.getTime()+-864e5)},g=function(){var a=!navigator||navigator.cookieEnabled!==!1;return a},h={};return h.write=function(a,b,c){return d(a,b,c)},h.read=function(a){return e(a)},h.remove=function(a){return f(a)},h.support=g(),h}(_,_settings),LocalStorage=function(a,b,c){this._cu="ry_"+a+"_"+b,this._cud=_.getTime()+24*_settings.USER_DAYS_DURATION*60*60*1e3,this._cs="ry_"+a+"_so_"+b,this._csd=_.getTime()+60*_settings.SESSION_MINUTES_DURATION*1e3,c(_cookie.support)};LocalStorage.prototype.clearUser=function(a){_cookie.remove(this._cu),a(!0)},LocalStorage.prototype.getUser=function(a){var b=_cookie.read(this._cu);a(b)},LocalStorage.prototype.setUser=function(a,b){var c=a?_.ryEncoder.decode(a):null;c=c&&c.exp?c.exp:this._cud,_cookie.write(this._cu,a,c),b(!0)},LocalStorage.prototype.clearSession=function(a){_cookie.remove(this._cs),a(!0)},LocalStorage.prototype.getSession=function(a){var b=_cookie.read(this._cs);a(b)},LocalStorage.prototype.setSession=function(a,b){_cookie.write(this._cs,a,this._csd),b(!0)};var _xdm=function(){var a=null,b=null,c=!1,d=function(e,f){if(c)if(null===b)var j=setTimeout(function(){j&&clearTimeout(j),d(e,f)},200);else f(b);else{c=!0;try{var g=(new Date).getTime(),h=e+"?ch="+g;a=RYxdm&&RYxdm.noConflict?RYxdm.noConflict("ryXDM"+g.toString()):null,a&&a.Rpc({remote:h,onReady:function(a){a&&null===b&&(b=!0,f(b))}},{serializer:_.json,local:{},remote:{remove:{},write:{},read:{}}})}catch(a){b=!1,f(b)}var i=setTimeout(function(){null===b&&(b=!1,f(b)),i&&clearTimeout(i)},_settings.XDM_TIMEOUT)}},e={};return e.init=function(a,b){d(a,function(a){b(a)})},e.write=function(b,c,e,f,g){d(b,function(b){b?a.write(c,e,f,function(a){g(!0)},function(a){g(!1)}):g(!1)})},e.read=function(b,c,e){d(b,function(b){b?a.read(c,function(a){e(a?a:null)},function(a){e(null)}):e(null)})},e.remove=function(b,c,e){d(b,function(b){b?a.remove(c,function(a){e(!0)},function(a){e(!1)}):e(!1)})},e}(),XdmStorage=function(a,b,c,d){this._uk="ry_"+a+"_"+b,this._ud=24*_settings.USER_DAYS_DURATION*60*60*1e3,this._sk="ry_"+a+"_so_"+b,this._sd=60*_settings.SESSION_MINUTES_DURATION*1e3,this._url=c,_xdm.init(this._url,function(a){d(a)})};XdmStorage.prototype.clearUser=function(a){_xdm.remove(this._url,this._uk,a)},XdmStorage.prototype.getUser=function(a){_xdm.read(this._url,this._uk,a)},XdmStorage.prototype.setUser=function(a,b){_xdm.write(this._url,this._uk,a,this._ud,b)},XdmStorage.prototype.clearSession=function(a){_xdm.remove(this._url,this._sk,a)},XdmStorage.prototype.getSession=function(a){_xdm.read(this._url,this._sk,a)},XdmStorage.prototype.setSession=function(a,b){_xdm.write(this._url,this._sk,a,this._sd,b)};var Storage=function(a,b,c,d,e){this._inst="xdm"==a?new XdmStorage(b,c,d,e):new LocalStorage(b,c,e)};Storage.prototype.clearUser=function(a){try{return this._inst.clearUser(a)}catch(b){a(!1)}},Storage.prototype.getUser=function(a){try{return this._inst.getUser(a)}catch(b){a(null)}},Storage.prototype.setUser=function(a,b){try{return this._inst.setUser(a,b)}catch(a){b(!1)}},Storage.prototype.clearSession=function(a){try{return this._inst.clearSession(a)}catch(b){a(!1)}},Storage.prototype.getSession=function(a){try{return this._inst.getSession(a)}catch(b){a(null)}},Storage.prototype.setSession=function(a,b){try{return this._inst.setSession(a,b)}catch(a){b(!1)}};var PartnerSynchronizer=function(a,b,c){this._apiKey=a,this._url=c,this._q=b===!1?[]:null,this._k={img:1,js:2}};PartnerSynchronizer.prototype._createParam=function(a){var b=null,c=this;try{return a&&a.id&&c._apiKey&&(b=c._apiKey.toString().toLowerCase()+"|"+a.id.toString()+"|"+(a.cid?a.cid.toString():"")),_.base64.encode(b)}catch(a){return _logger.error("Failed to crypt sync data info="+(b?b:"")+".",a),null}},PartnerSynchronizer.prototype._queuePush=function(a,b){this._q&&a&&b&&this._q.push({type:a,url:b})},PartnerSynchronizer.prototype._queueClear=function(){if(this._q)for(var a=0;a<this._q.length;a++){var b=this._q[a];b&&this._syncWithTypeUrl(b.type,b.url)}this._q=null},PartnerSynchronizer.prototype._syncExec=function(a,b){null==this._q?this._syncWithTypeUrl(a,b):this._queuePush(a,b)},PartnerSynchronizer.prototype._syncWithTypeUrl=function(a,b){a&&b&&(a==this._k.img?this._syncWithImgEl(b):a==this._k.js&&this._syncWithJsEl(b))},PartnerSynchronizer.prototype._syncWithImgEl=function(a){try{if(a){var b=document.createElement("img");b.src=a,document.body.appendChild(b)}}catch(b){_logger.error("Failed to sync user data url="+(a?a:"")+".",b)}},PartnerSynchronizer.prototype._syncWithJsEl=function(a){try{if(a){var b=document.createElement("script");b.type="text/javascript",b.async=!0,b.src=a;var c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)}}catch(b){_logger.error("Failed to sync user data url="+(a?a:"")+".",b)}},PartnerSynchronizer.prototype.syncWithImg=function(a){try{var b=a?this._createParam(a):null;if(b&&this._url){var c=this._url+"/"+encodeURIComponent(b);this._syncExec(this._k.img,c)}}catch(b){_logger.error("Failed to sync user data info="+(a?a:"")+".",b)}},PartnerSynchronizer.prototype.syncWithJs=function(a,b){try{var c=a?this._createParam(a):null;if(c&&this._url){var d=this._url+"/"+encodeURIComponent(c)+b;d&&this._syncExec(this._k.js,d)}}catch(b){_logger.error("Failed to sync user data info="+(a?a:"")+".",b)}},PartnerSynchronizer.prototype.enable=function(){try{this._queueClear()}catch(a){_logger.error("Failed to enable profile data.",a)}};var PartnerUserSynchronizer=function(a,b,c,d,e,f){this._apiKey=a,this._userSynchronizer=c&&_settings.SYNC_USER_ENABLED?new PartnerSynchronizer(a,b,d):null,this._tcSynchronizer=e&&_settings.SYNC_USER_TC_ENABLED?new PartnerSynchronizer(a,b,f):null};PartnerUserSynchronizer.prototype.sync=function(a,b){try{if(a&&this._userSynchronizer){var c="";b&&(c+="?u="+encodeURIComponent(b.url?b.url:""),c+="&r="+encodeURIComponent(b.referrer?b.referrer:""),c+="&ts="+encodeURIComponent((new Date).getTime().toString())),this._userSynchronizer.syncWithJs(a,c)}a&&this._tcSynchronizer&&this._tcSynchronizer.syncWithImg(a)}catch(a){_logger.error("Failed to sync partner user.",a)}},PartnerUserSynchronizer.prototype.enable=function(){this._userSynchronizer&&this._userSynchronizer.enable(),this._tcSynchronizer&&this._tcSynchronizer.enable()};var PartnerSessionSynchronizer=function(a,b,c,d){this._apiKey=a,this._sessionSynchronizer=c&&_settings.SYNC_SESSION_ENABLED?new PartnerSynchronizer(a,b,d):null};PartnerSessionSynchronizer.prototype.sync=function(a,b,c,d){try{if(a&&this._sessionSynchronizer){var e="?ct="+(b?"1":"0");e+="&rt="+(c?"1":"0"),d&&(e+="&u="+encodeURIComponent(d.url?d.url:""),e+="&r="+encodeURIComponent(d.referrer?d.referrer:""),e+="&ts="+encodeURIComponent((new Date).getTime().toString())),this._sessionSynchronizer.syncWithJs(a,e)}}catch(a){_logger.error("Failed to sync partner user session.",a)}},PartnerSessionSynchronizer.prototype.enable=function(){this._sessionSynchronizer&&this._sessionSynchronizer.enable()};var ProfileSynchronizer=function(a){this._q=a===!1?[]:null};ProfileSynchronizer.prototype._queuePush=function(a){this._q&&a&&this._q.push({action:a})},ProfileSynchronizer.prototype._queueClear=function(){if(this._q)for(var a=0;a<this._q.length;a++){var b=this._q[a];b&&b.action&&b.action()}this._q=null},ProfileSynchronizer.prototype.sync=function(a){try{a&&(null==this._q?a():this._queuePush(a))}catch(a){_logger.error("Failed to sync profile data.",a)}},ProfileSynchronizer.prototype.enable=function(){try{this._queueClear()}catch(a){_logger.error("Failed to enable profile data.",a)}};var Event=function(a,b,c,d,e,f,g,h,i,j,k,l,m){if(this.c=a,this.t=b?b:(new Date).getTime(),g&&(this.mu={uid:g},h&&(this.mu.c_uid=h),i&&(this.mu.puid=i),j&&(this.mu.cu=j),k&&(k.firstname&&(this.mu.fn=k.firstname),k.lastname&&(this.mu.ln=k.lastname),k.gender&&(this.mu.g=k.gender),k.email&&(this.mu.e=k.email),k.created&&(this.mu.rd=k.created),k.birthdate&&(this.mu.b=k.birthdate))),c&&(this.data={n:c},d&&(this.data.v=d),e&&(this.data.tx=e),f&&(this.data.opts=f),l)){var n={};for(var o in l){var p=o?l[o]:null;p&&p.id&&(n[o]={i:p.id},p.email&&(n[o].e=p.email),p.firstname&&(n[o].f=p.firstname),p.lastname&&(n[o].l=p.lastname),p.gender&&(n[o].g=p.gender),p.created&&(n[o].c=p.created),p.birthdate&&(n[o].b=p.birthdate),p.meta&&(n[o].m=p.meta))}this.data.pr=n}if(m){var q={};m.url&&(q.u=m.url.length>_settings.URL_MAX_SIZE?m.url.substr(0,_settings.URL_MAX_SIZE):m.url),m.domain&&(q.d=m.domain),m.referrer&&(q.r=m.referrer.length>_settings.URL_MAX_SIZE?m.referrer.substr(0,_settings.URL_MAX_SIZE):m.referrer),m.se&&m.se.engine&&(q.se=m.se.engine),m.se&&m.se.query&&(q.sq=m.se.query),m.env&&m.env.browser&&(q.eb=m.env.browser),m.env&&m.env.device&&(q.ed=m.env.device),m.env&&m.env.os&&(q.eo=m.env.os),m.env&&(q.em=m.env.mobile),m.camp&&m.camp.utm_source&&(q.cs=m.camp.utm_source),m.camp&&m.camp.utm_medium&&(q.cm=m.camp.utm_medium),m.camp&&m.camp.utm_campaign&&(q.cc=m.camp.utm_campaign),m.camp&&m.camp.utm_content&&(q.co=m.camp.utm_content),m.camp&&m.camp.utm_term&&(q.ct=m.camp.utm_term),m.camp&&m.camp.xtor&&(q.cx=m.camp.xtor),q.son=!(!m.session||!m.session.origin),q.ro=m.session&&m.session.ref?m.session.ref.length>_settings.URL_MAX_SIZE?m.session.ref.substr(0,_settings.URL_MAX_SIZE):m.session.ref:null,this.mc={p:q}}},User=function(a,b,c){this.id=a?a:"ry_"+_.getUIID(),this.cid=b?b:null,this.exp=c&&_.isNumber(c)?c:_.getTime()+24*_settings.USER_DAYS_DURATION*60*60*1e3};User.prototype.toObject=function(){return{id:this.id,cid:this.cid,exp:this.exp}};var Session=function(a,b,c,d,e){this.id=a?a:null,this.cid=b?b:null,this.origin=!!c,this.ref=d?d:null,this.cont=e?e:null};Session.prototype.toObject=function(){return{id:this.id,cid:this.cid,origin:this.origin,ref:this.ref,cont:this.cont}};var Api=function(a,b,c,d){this._apiKey=a,this._http=b,this._urlPost=c,this._urlGet=d,this._first=!0};Api.prototype._get=function(a,b){try{if(a&&document&&!RY._ot){var c=document.createElement("script");c.type="text/javascript",c.async=!0,c.defer=!0,c.src=a;var d=document.getElementsByTagName("script")[0];d.parentNode.insertBefore(c,d)}}catch(c){_logger.error("Failed to exec request with url="+(a?a:"")+".",c),b()}},Api.prototype._post=function(a,b,c){try{if(a&&!RY._ot){var d=null,e=null;if(!_.isUndefined(window.XMLHttpRequest)&&window.XMLHttpRequest&&(d=new window.XMLHttpRequest)&&"withCredentials"in d?(e="XMLHttpRequest",d.open("POST",a,!0),d.withCredentials=!0,d.setRequestHeader("Content-Type","text/plain")):!_.isUndefined(window.XDomainRequest)&&window.XDomainRequest&&(e="XDomainRequest",d=new window.XDomainRequest,d.open("POST",a)),e&&d){d.onreadystatechange=function(){try{4===this.readyState&&200!==this.status&&c(!0,{code:this.status,method:"POST",type:e,response:this.response,timeout:this.timeout})}catch(d){_logger.error("Failed to parse request response with data="+(b?b:"")+", url="+(a?a:"")+".",d),c(!0)}};try{d.send(b)}catch(d){_logger.error("Failed to send request with data="+(b?b:"")+", url="+(a?a:"")+".",d),c(!0)}}else _logger.debug("Failed to POST cross domain, so we'll try to do a GET with data="+(b?b:"")+", url="+(a?a:"")+"."),c(!1)}}catch(d){_logger.error("Failed to exec request with data="+(b?b:"")+", url="+(a?a:"")+".",d),c(!0)}},Api.prototype._send_data=function(a,b){var c=this,d="cb="+(new Date).getTime(),e=c._urlPost?c._http+c._urlPost+(c._urlGet.indexOf("?")<0?"?":"&")+d:null,f=c._urlGet?c._http+c._urlGet+(c._urlGet.indexOf("?")<0?"?":"&")+d+"&data="+encodeURIComponent(a):null,g=function(){c._get(f,function(){_logger.error("Failed to track data="+(a?a:"")+".")})},h=function(){var b=_.env.getBrowser();b&&"OperaMini"==b?g():c._post(e,a,function(b,c){_logger.debug("Try get request after post failed to send data, statuscode="+(c&&!_.isUndefined(c.code)&&null!=c.code?c.code:"")+", method="+(c&&c.method?c.method.toLowerCase():"")+", response="+(c&&c.response?c.response:"")+", timeout="+(c&&!_.isUndefined(c.timeout)&&null!=c.timeout?c.timeout:"")+", request="+(c&&c.type?c.type.toLowerCase():"")+", data="+(a?a:"")+"."),g()})};if(c._first)var i=setTimeout(function(){clearTimeout(i),c._first=!1,h()},_settings.OPTOUT_TIMEOUT);else h()},Api.prototype._send=function(a){if(_settings.HTTP_PROTOCOL.indexOf("https")==-1||_settings.HTTPS_ENABLED){if(!a||!_.isObject(a))throw"Unable to serialize data to send";var b=!!(a&&a.mc&&a.mc.p&&a.mc.p.em),c=_.ryEncoder.encode(a);if(!c)throw"Unable to serialize data to send";this._send_data(c,b)}},Api.prototype.track=function(a){a&&a.mu&&this._send(a)};var _trackerStatus={disabled:0,pending:1,enabled:2},Tracker=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t=this;t._apiKey=a,t._ampCookieKey="ry_amp_"+a,t.ovrdDomain=h,t.ovrdUrl=i,t.ovrdReferrer=j,t.ovrdOrganic=k,t._status=c!=_trackerStatus.disabled?_trackerStatus.pending:_trackerStatus.disabled,t._ready=!1,t._name=b,t._pendingOrder=[],t._pendingActions={identify:[],track:[],trackLink:[],trackForm:[],transaction:[],page:[],profile:[],sync:[]};var u=_settings.HTTP_PROTOCOL,v=f&&_settings.URI_ZONES[f.toString().toUpperCase()]?_settings.URI_ZONES[f.toString().toUpperCase()]:_settings.URI_ZONES.EU,w=e?e:(_.env.isMobile()?v.API_MOBILE:v.API)+"/event/track",x=u+v.SYNC_USER+"/sync/tc",y=u+v.SYNC_USER+"/sync/us",z=u+v.SYNC_SESSION+"/sync/se";a&&"ry-srewok"==a.toLowerCase()&&_settings.URI_STREAMROOT&&(w=_settings.URI_STREAMROOT+"/event/track"),t._api=new Api(a,u,w,w),t._storage=d,t._storageLocker=new Locker;var A=r&&s&&(_.isString(s)||_.isNumber(s))?s.toString().replace(/^\s+|\s+$/g,""):null;if(A=A&&"-1"!=A.toString()&&"0"!=A.toString()&&"null"!=A.toString().toLowerCase()?A:null,t._userPartnerEuId=A,t._syncOnStart=!(o||!n),t._syncOnScroll=!o&&!n,t._partnerSyncUser=new PartnerUserSynchronizer(a,t._syncOnStart,p,y,q,x),t._partnerSyncSession=new PartnerSessionSynchronizer(a,t._syncOnStart,!0,z),t._profileSync=new ProfileSynchronizer(t._syncOnStart),t._status!=_trackerStatus.disabled){try{t._info={};var B=_.url.getInfo(t.ovrdUrl);B&&(t._info.url=B);var C=_.domain.getInfo(t.ovrdDomain);C&&(t._info.domain=C);var D=_.referrer.getInfo(t._apiKey,t.ovrdReferrer,g);D&&(t._info.referrer=D);var E=_.searchEngine.getInfo(B,D);E&&(t._info.se=E);var F=_.env.getInfo();F&&(t._info.env=F);var G=_.campaign.getInfo(B);G&&(t._info.camp=G)}catch(a){t._info={}}var H=function(){try{_logger.setUserId(t._user?t._user.id:null)}catch(a){_logger.error("Failed to configure logger user id.",a)}t._info.session=null,t._refresh(!0,function(){try{m&&m(t._user?t._user.id:null)}catch(a){_logger.error("Failed to execute init callback.",a)}t._ready=!0,c==_trackerStatus.enabled&&(t.enable(),t.enableEvents())})};t._storageLocker.lock(function(a){try{t._storage.getUser(function(b){var c=b?_.ryEncoder.decode(b):null,d=null;!c||!c.id||c&&c.exp&&_.isNumber(c.exp)&&c.exp<_.getTime()?(d=l?l:_cookie.read(t._ampCookieKey),t._user=d?new User(d):new User):(d=l?l:c.id,t._user=new User(d,c.cid?c.cid:null,c.exp?c.exp:null),(t._syncOnStart||t._syncOnScroll)&&t._sync(!0));var e=_.ryEncoder.encode(t._user.toObject());t._storage.setUser(e,function(b){a()}),t._partnerSyncUser.sync(t._user,{url:t._info.url?t._info.url:null,referrer:t._info.referrer?t._info.referrer:null}),H()})}catch(b){t._user=null,H(),a()}})}};Tracker.prototype.disable=function(a){var b=this;b._status!=_trackerStatus.disabled&&(a&&b._storageLocker.lock(function(a){b._storage.clearUser(function(){b._storage.clearSession(function(){a()})})}),b._status=_trackerStatus.disabled)},Tracker.prototype.enable=function(){var a=this;if(a._status==_trackerStatus.pending)if(a._ready)a._shiftCalls(),a._status=_trackerStatus.enabled,a._shiftCalls();else var b=setTimeout(function(){b&&clearTimeout(b),a.enable()},200)},Tracker.prototype.enableEvents=function(){var a=this;if(a._status==_trackerStatus.enabled)a._shiftEvents();else if(a._status==_trackerStatus.pending||_listener&&!_listener.onLoadedDone)var b=setTimeout(function(){b&&clearTimeout(b),a.enableEvents()},200)},Tracker.prototype.identify=function(a,b){try{this._status==_trackerStatus.pending?this._queueAction("identify",arguments):this._status==_trackerStatus.enabled&&this._identify(a,b)}catch(b){_logger.error("Failed to identify user="+(a?a.toString():"")+".",b)}},Tracker.prototype._identify=function(a,b){try{var c=this,d=!1,e=a&&(_.isString(a)||_.isNumber(a))?a.toString().replace(/^\s+|\s+$/g,""):null;e=e&&"-1"!=e.toString()&&"0"!=e.toString()&&"null"!=e.toString().toLowerCase()?e:null,c._storageLocker.lock(function(a){if(!e||c._user&&c._user.cid&&c._user.cid==e)a();else{d=!(!c._user||c._user.cid);var f=new User(c._user?c._user.id:null,e,c._user.exp?c._user.exp:null),g=_.ryEncoder.encode(f.toObject());c._user=f,c._storage.setUser(g,function(b){a()}),c._partnerSyncUser.sync(c._user,{url:c._info.url?c._info.url:null,referrer:c._info.referrer?c._info.referrer:null}),c._trackIdentify(b,!!d)}}),c._refresh(!d,function(){})}catch(b){_logger.error("Failed to update user on identify, user="+(a?a.toString():"")+".",b)}},Tracker.prototype.page=function(a,b,c){try{this._status==_trackerStatus.pending?this._queueAction("page",arguments):this._status==_trackerStatus.enabled&&this._page(a,b,c)}catch(b){_logger.error("Failed to track page="+(a?a.toString():"")+".",b)}},Tracker.prototype._page=function(a,b,c){try{var d=!1;if(a&&_.isString(a))d=!0;else{var e=_.url.getInfo(this.ovrdUrl);a=e?e>_settings.URL_MAX_SIZE?e.substr(0,_settings.URL_MAX_SIZE):e:null}var f={page:a};b&&_.isString(b)&&(f.category=b),c&&_.isObject(c)&&(f.info=c),this._track("ry_page",f),d&&_settings.PAGE_HACK&&this._track("ry_page_"+a)}catch(b){_logger.error("Failed to exec track page="+(a?a.toString():"")+".",b)}},Tracker.prototype.profile=function(a){try{this._status==_trackerStatus.pending?this._queueAction("profile",arguments):this._status==_trackerStatus.enabled&&this._profile(a)}catch(a){_logger.error("Failed to profile user.",a)}},Tracker.prototype._profile=function(a){try{var b=this;b._refresh(!0,function(){b._trackProfile(a)})}catch(a){_logger.error("Failed to update user profile.",a)}},Tracker.prototype.queue=function(a,b){try{if(!a||!_.isObject(a))return;this._queueActions(a,b)}catch(a){_logger.error("Failed to queue actions.",a)}},Tracker.prototype._queueActions=function(a,b){if(a&&_.isObject(a)){for(var c in a)if(c&&"typeOf"!=c){var d=a[c];this._pendingActions[c]&&_.isArray(this._pendingActions[c])?this._pendingActions[c]=this._pendingActions[c].concat(d&&_.isArray(d)?d:[]):_logger.warn("Unable to queue actions '"+c+"', no queue available.")}b&&_.isArray(b)&&(this._pendingOrder=this._pendingOrder.concat(b))}},Tracker.prototype._queueAction=function(a,b){a&&"typeOf"!=a&&(this._pendingActions[a]&&_.isArray(this._pendingActions[a])?(this._pendingActions[a].push(b&&_.isArray(b)?b:[]),this._pendingOrder.push(a)):_logger.warn("Unable to queue action '"+a+"', no queue available."))},Tracker.prototype.refreshContext=function(a){var b=this;try{a&&a.csid&&b._info&&b._info.session&&!b._info.session.cont&&b._refreshSessionContext(a,function(){b._refreshContextEnv()})}catch(a){_logger.error("Failed to refresh context.",a)}},Tracker.prototype._refreshContextEnv=function(){var a=this;try{var b=a._info&&a._info.session&&a._info.session.cont?a._info.session.cont:null,c={};c.spotId=b&&b.csid?b.csid.toString():null,c.campaignId=b&&b.caid?b.caid.toString():null,c.channelId=b&&b.chid?b.chid.toString():null,c.channelName=b&&b.chn?b.chn.toString():null,c.creaId=b&&b.crid?b.crid.toString():null,window&&(window.RYcontext=c)}catch(a){_logger.error("Failed to refresh context env.",a)}},Tracker.prototype._refresh=function(a,b){var c=this;try{c._refreshSession(function(d){if(d&&a&&c._trackEvent("ry_session"),c._refreshContextEnv(),d){var e=!!(a&&c._info.session&&c._info.session.origin),f=!c._info.session.cont;(f||e)&&c._partnerSyncSession.sync(c._user,f,e,{url:c._info.url?c._info.url:null,referrer:c._info.referrer?c._info.referrer:null}),c._profileSync.sync(function(){c._trackProfileGA()})}b()})}catch(a){_logger.error("Failed to refresh user info.",a)}},Tracker.prototype._refreshSession=function(a){var b=this;b._storageLocker.lock(function(c){var d=function(d){try{var e=null,f=!1,g=d?_.ryEncoder.decode(d):null;if(b._user&&(!g||!g.id||b._user.id&&b._user.id!=g.id||b._user.cid&&(!g.cid||b._user.cid!=g.cid)||!b._user.cid&&g.cid)){if(g&&g.id)e=new Session(b._user.id,b._user.cid,g.origin,g.ref,g.cont);else{var h=!(b._info&&(!(!b._info.referrer||b._info.se&&b._info.se.engine)||b._info.camp));if(!h&&b._info&&b._info.url){var i=_.url.getParamValue(b._info.url,"gclid"),j=_.url.getParamValue(b._info.url,"adurl");h=!(!i&&!j)}_.isUndefined(b.ovrdOrganic)||null==b.ovrdOrganic||(h=!!b.ovrdOrganic),e=new Session(b._user.id,b._user.cid,h,this._info?this._info.referrer:null,null)}f=!0,d=_.ryEncoder.encode(e.toObject())}else f=!1,e=g?new Session(g.id,g.cid,g.origin,g.ref,g.cont):null;d?b._storage.setSession(d,function(a){c()}):c()}catch(a){_logger.error("Failed to refresh session info, sessionCrypted="+(d?d:"")+".",a),f=!1,e=null,c()}b._info&&(b._info.session=e),a(f)};try{b._storage.getSession(function(a){d(a)})}catch(a){d(null)}})},Tracker.prototype._refreshSessionContext=function(a,b){var c=this;a&&a.csid&&c._info&&c._info.session&&!c._info.session.cont&&c._storageLocker.lock(function(d){var e=function(e){try{var f=e?_.ryEncoder.decode(e):null,g=f?new Session(f.id,f.cid,f.origin,f.ref,{csid:a.csid?a.csid:null,caid:a.caid?a.caid:null,chid:a.chid?a.chid:null,crid:a.crid?a.crid:null,chn:a.chn?a.chn:null}):null,h=g?_.ryEncoder.encode(g.toObject()):null;h?c._storage.setSession(h,function(a){c._info&&(c._info.session=g),d(),b()}):(d(),b())}catch(a){_logger.error("Failed to refresh session context, sessionCrypted="+(e?e:"")+".",a),d(),b()}};try{c._storage.getSession(function(a){e(a)})}catch(a){e(null)}})},Tracker.prototype._shiftCalls=function(){var a=this;if(a._pendingOrder&&_.isArray(a._pendingOrder)&&a._pendingOrder.length>0){for(var b=[];a._pendingOrder.length>0;){var c=a._pendingOrder.shift();if(c&&_.isString(c))switch(c){case"identify":a._shiftAction("identify",a._identify);break;case"profile":a._shiftAction("profile",a._profile);break;case"page":a._shiftAction("page",a._page);break;case"track":a._shiftAction("track",a._track);break;case"transaction":a._shiftAction("transaction",a._transaction);break;case"sync":a._shiftAction("sync",a._sync);break;case"trackLink":case"trackForm":b.push(c)}}a._pendingOrder=b}this._shiftActions("identify",this._identify),this._shiftActions("profile",this._profile),this._shiftActions("page",this._page),this._shiftActions("track",this._track),this._shiftActions("transaction",this._transaction),this._shiftActions("sync",this._sync)},Tracker.prototype._shiftEvents=function(){var a=this;if(a._pendingOrder&&_.isArray(a._pendingOrder)&&a._pendingOrder.length>0){for(var b=[];a._pendingOrder.length>0;){var c=a._pendingOrder.shift();if(c&&_.isString(c))switch(c){case"identify":case"profile":case"page":case"track":case"transaction":case"sync":b.push(c);break;case"trackLink":a._shiftAction("trackLink",a._trackLink);break;case"trackForm":a._shiftAction("trackForm",a._trackForm)}}a._pendingOrder=b}this._shiftActions("trackLink",this._trackLink),this._shiftActions("trackForm",this._trackForm)},Tracker.prototype._shiftActions=function(a,b){var c=this;if(c._pendingActions&&a&&c._pendingActions[a]&&_.isArray(this._pendingActions[a]))for(;!_.isArrayNullOrEmpty(c._pendingActions[a]);)c._shiftAction(a,b)},Tracker.prototype._shiftAction=function(a,b){var c=this;if(a&&b&&c._pendingActions[a]&&_.isArray(this._pendingActions[a])&&c._pendingActions[a].length>0){var d=c._pendingActions[a].shift();b.apply(c,d)}},Tracker.prototype.sync=function(){try{this._status==_trackerStatus.pending?this._queueAction("sync",arguments):this._status==_trackerStatus.enabled&&this._sync()}catch(a){_logger.error("Failed to sync.",a)}},Tracker.prototype._sync=function(a){try{this._partnerSyncUser&&this._partnerSyncUser.enable(),this._partnerSyncSession&&this._partnerSyncSession.enable(),this._profileSync&&this._profileSync.enable(),a||this._trackProfileGA()}catch(a){_logger.error("Failed to start synchronizers.",a)}},Tracker.prototype.syncScroll=function(){try{this._syncOnScroll&&this._sync(!0)}catch(a){_logger.error("Failed to enable synchronizers on scroll.",a)}},Tracker.prototype.track=function(a,b){try{this._status==_trackerStatus.pending?this._queueAction("track",arguments):this._status==_trackerStatus.enabled&&this._track(a,b)}catch(b){_logger.error("Failed to track event="+(a?a.toString():"")+".",b)}},Tracker.prototype.trackSync=function(a,b){try{this._trackEvent(a,b)}catch(b){_logger.error("Failed to track sync event="+(a?a.toString():"")+".",b)}},Tracker.prototype._track=function(a,b){var c=this;try{c._refresh(!0,function(){c._trackEvent(a,b)})}catch(b){_logger.error("Failed to exec track event="+(a?a.toString():"")+".",b)}},Tracker.prototype._trackEvent=function(a,b){try{if(a)if(_.isString(a)){var c=_.isUndefined(b)||null==b||_.isObject(b)?b:{value:b},d=null,e=null,f=null;if(c)for(var g in c)if(g){var h=c[g];switch(g.toString().toLowerCase()){case"transaction":if(!_.isUndefined(h)&&null!=h&&(_.isObject(h)||_.isNumber(h)||_.isString(h)))if(e={},_.isObject(h)){var i=h.amount;_.isUndefined(i)||null==i||!_.isNumber(i)&&!_.isString(i)||(e.am=i);var j=h.orderId;_.isUndefined(j)||null==j||!_.isNumber(j)&&!_.isString(j)||(e.oid=j)}else e.am=h;break;case"user":if(!_.isUndefined(h)&&null!=h&&_.isObject(h)){var k=h.id;_.isUndefined(k)||null==k||!_.isNumber(k)&&!_.isString(k)||(k=k&&(_.isString(k)||_.isNumber(k))?k.toString().replace(/^\s+|\s+$/g,""):null,k=k&&"-1"!=k.toString()&&"0"!=k.toString()&&"null"!=k.toString().toLowerCase()?k:null,k&&(f=k))}d||(d={}),d[g]=h;break;default:d||(d={}),d[g]=h}}var l=new Event(this._apiKey,(new Date).getTime(),a,d,e,null,this._user?this._user.id:null,f?f:this._user?this._user.cid:null,this._userPartnerEuId?this._userPartnerEuId:null,null,null,null,this._info);this._api.track(l)}else _logger.warn("Unable to track, event is not a string.");else _logger.warn("Unable to track, event is not valid.")}catch(b){_logger.error("Failed to track with api event="+(a?a.toString():"")+".",b)}},Tracker.prototype._trackIdentify=function(a,b){try{var c=!_.isUndefined(a)&&null!=a&&_.isObject(a)?a:null,d=null,e=null;if(c)for(var f in c){var g=c[f];switch(f){case"firstname":case"lastname":case"gender":case"email":case"created":case"birthdate":e||(e={}),e[f]=g;break;default:d||(d={}),d[f]=g}}var h=new Event(this._apiKey,(new Date).getTime(),"ry_identify",null,null,b?"ry_alias":null,this._user?this._user.id:null,this._user?this._user.cid:null,this._userPartnerEuId?this._userPartnerEuId:null,d,e,null,this._info);this._api.track(h)}catch(a){_logger.error("Failed to track identify with api.",a)}},Tracker.prototype._trackProfile=function(a){try{var b=!_.isUndefined(a)&&null!=a&&_.isObject(a)?a:null,c={},d=!1;if(b)for(var e in b)if(e){var f=b[e.toString().toLowerCase()];if(f&&_.isObject(f)){c[e]={};for(var g in f){var h=g.toString().toLowerCase(),i=f[g];switch(h){case"id":case"firstname":case"lastname":case"gender":case"email":case"created":case"birthdate":"id"==h&&(d=!0),c||(c[e]={}),c[e][h]=i;break;default:c||(c[e]={}),c.meta||(c[e].meta={}),c[e].meta[h]=i}}}}if(d){var j=new Event(this._apiKey,(new Date).getTime(),"ry_profile",null,null,null,this._user?this._user.id:null,this._user?this._user.cid:null,this._userPartnerEuId?this._userPartnerEuId:null,null,null,c,this._info);this._api.track(j)}}catch(a){_logger.error("Failed to track identify with api.",a)}},Tracker.prototype._trackProfileGA=function(){try{var a=this,b=function(b){b&&!a._trackProfileGADone&&(a._trackProfile({ga:{id:b}}),a._trackProfileGADone=!0)},c=setTimeout(function(){c&&clearTimeout(c);try{if(window&&!_.isUndefined(window.ga)&&window.ga){var a=window.ga.getAll&&window.ga.getAll()&&window.ga.getAll().length&&window.ga.getAll()[0]?window.ga.getAll()[0].get("clientId"):null;a?b(a):window.ga(function(a){try{var c=a&&a.get?a.get("clientId"):null;c=!c&&window.ga.getAll&&window.ga.getAll()&&window.ga.getAll().length&&window.ga.getAll()[0]?window.ga.getAll()[0].get("clientId"):c,c&&b(c)}catch(a){_logger.error("Failed to exec ga profile.",a)}})}}catch(a){_logger.error("Failed to exec ga profile.",a)}},200)}catch(a){_logger.error("Failed to exec ga profile.",a)}},Tracker.prototype.trackLink=function(a,b,c){try{this._status==_trackerStatus.pending?this._queueAction("trackLink",arguments):this._status==_trackerStatus.enabled&&this._trackLink(a,b,c)}catch(a){_logger.error("Failed to track link with event="+(b?b.toString():"")+".",a)}},Tracker.prototype._trackLink=function(a,b,c){try{var d=_selector.getDomElements(a);if(d&&_.isArray(d)&&d.length>=1)if(b)if(_.isString(b))for(var e=0;e<d.length;e++)d[e]&&this._trackLinkByElement(d[e],b,c);else _logger.warn("Unable to track link, event provided is not a string.");else _logger.warn("Unable to track link, no event provided.")}catch(a){_logger.error("Failed to exec track link with event="+(b?b.toString():"")+".",a)}},Tracker.prototype._trackLinkByElement=function(a,b,c){try{if(a&&b){var d=this;_listener.onEvent(a,"click",function(a,e){try{d.track(b,c);var f=e&&(e.which&&2===e.which||e.metaKey||e.ctrlKey)||a&&a.target&&"_blank"===a.target,g=a&&a.href?a.href:null;!f&&e&&(e.preventDefault?e.preventDefault():e.returnValue=!1,setTimeout(function(){window&&!_.isUndefined(g)&&null!=g&&(window.location=g)},_settings.EVENT_TRACK_TIMEOUT))}catch(a){_logger.error("Failed to track link after click with event="+(b?b:"")+".",a)}})}}catch(a){_logger.error("Failed to track link on click with event="+(b?b:"")+".",a)}},Tracker.prototype.trackForm=function(a,b,c){try{this._status==_trackerStatus.pending?this._queueAction("trackForm",arguments):this._status==_trackerStatus.enabled&&this._trackForm(a,b,c)}catch(a){_logger.error("Failed to track form with event="+(b?b.toString():"")+".",a)}},Tracker.prototype._trackForm=function(a,b,c){try{var d=_selector.getDomElements(a);if(d&&_.isArray(d)&&d.length>=1)if(b)if(_.isString(b))for(var e=0;e<d.length;e++)d[e]&&this._trackFormByElement(d[e],b,c);else _logger.warn("Unable to track form, event provided is not a string.");else _logger.warn("Unable to track form, no event provided.")}catch(a){_logger.error("Failed to exec track form with event="+(b?b.toString():"")+".",a)}},Tracker.prototype._trackFormByElement=function(a,b,c){try{if(a&&b){var d=this;_listener.onEvent(a,"submit",function(a,e){try{d.track(b,c),e&&(e.preventDefault?e.preventDefault():e.returnValue=!1,setTimeout(function(){a&&a.submit&&a.submit()},_settings.EVENT_TRACK_TIMEOUT))}catch(a){_logger.error("Failed to track form after click with event="+(b?b:"")+".",a)}})}}catch(a){_logger.error("Failed to track form on click with event="+(b?b:"")+".",a)}},Tracker.prototype.transaction=function(a,b){try{this._status==_trackerStatus.pending?this._queueAction("transaction",arguments):this._status==_trackerStatus.enabled&&this._transaction(a,b)}catch(b){_logger.error("Failed to track transaction="+(a?a.toString():"")+".",b)}},Tracker.prototype._transaction=function(a,b){try{if(_.isUndefined(a)||null==a||!_.isNumber(a)&&!_.isString(a))_logger.warn("Unable to track transaction, no valid amount.");else{var c={};c.transaction=b&&_.isObject(b)?b:{},c.transaction.amount=a,this._track("ry_transaction",c)}}catch(b){_logger.error("Failed to exec track transaction amount="+(a?a.toString():"")+".",b)}};var Binder=function(a){this._ry=a,this._instances=[]};Binder.prototype.createTracker=function(a,b,c,d){var e=function(a,b,c,d){var e=null,f=_.env.isBot||RY._ot||!_cookie.support?_trackerStatus.disabled:c,g=d&&_.isObject(d)?d:null,h=!!(g&&g.xdm&&_settings.XDM_ENABLED),i=!g||g.syncAuto!==!1,j=!(!g||g.syncManual!==!0),k=!(!(g&&g.syncUser||a&&("ry-br0v4113"==a.toLowerCase()||"ry-s0n41to2"==a.toLowerCase()||"ry-l4f02rfr"==a.toLowerCase()||"ry-l4f02rch"==a.toLowerCase()||"ry-th3f0rit"==a.toLowerCase()||"ry-t3f0rkbe"==a.toLowerCase()||"ry-t3f0rknl"==a.toLowerCase()||"ry-3ltenees"==a.toLowerCase()||"ry-loc2jui1"==a.toLowerCase()||"ry-fx33aenn"==a.toLowerCase()||"ry-021gos81"==a.toLowerCase()||"ry-h1m0ll4z"==a.toLowerCase()||"ry-ty1rdrd3"==a.toLowerCase()))||!_settings.SYNC_USER_ENABLED),l=!!(g&&g.syncTc&&_settings.SYNC_USER_TC_ENABLED),m=!!(g&&g.syncEu&&_settings.SYNC_USER_EU_ENABLED),n=g&&g.uidEu&&_settings.SYNC_USER_EU_ENABLED?g.uidEu.toString():null,o=g&&g.api&&_.isString(g.api)?g.api:null,p=g&&g.zone&&_.isString(g.zone)?g.zone:null,q=p&&_settings.URI_ZONES[p.toString().toUpperCase()]?_settings.URI_ZONES[p.toString().toUpperCase()]:_settings.URI_ZONES.EU,r=q.XDM,s=_settings.HTTP_PROTOCOL+r+"/txd.html",t=new Storage(h?"xdm":"cookie",a,b,s,function(a){a||(f=_trackerStatus.disabled,e&&e.disable&&e.disable(!1))}),u=!(!g||!g.topReferrer),v=g&&!_.isUndefined(g.domain)?g.domain:_.noOvrd;v=v?v:null;var w=g&&!_.isUndefined(g.referrer)?g.referrer:_.noOvrd;w=w?w:null;var x=g&&!_.isUndefined(g.organic)?g.organic:null;x=null!=x?x:null;var y=g&&!_.isUndefined(g.url)?g.url:_.noOvrd;y=y?y:null;var z=g&&!_.isUndefined(g.userId)&&g.userId&&(_.isString(g.userId)||_.isNumber(g.userId))?g.userId:null;z=z?z.toString():null;var A=g&&!_.isUndefined(g.onInit)?g.onInit:null;return e=new Tracker(a,b,f,t,o,p,u,v,y,w,x,z,A,i,j,k,l,m,n),{_disable:function(){return e.disable.apply(e,arguments)},_enable:function(){return e.enable.apply(e,arguments)},_enableEvents:function(){return e.enableEvents.apply(e,arguments)},_syncScroll:function(){return e.syncScroll.apply(e,arguments)},identify:function(){return e.identify.apply(e,arguments)},page:function(){return e.page.apply(e,arguments)},profile:function(){return e.profile.apply(e,arguments)},queue:function(){return e.queue.apply(e,arguments)},refreshContext:function(){return e.refreshContext.apply(e,arguments)},sync:function(){return e.sync.apply(e,arguments)},track:function(){return e.track.apply(e,arguments)},trackLink:function(){return e.trackLink.apply(e,arguments)},trackForm:function(){return e.trackForm.apply(e,arguments)},trackSync:function(){return e.trackSync.apply(e,arguments)},transaction:function(){return e.transaction.apply(e,arguments)}}}(a,b,c,d);return this._instances.push(e),e},Binder.prototype.bindMainInstance=function(a){var b=this._ry[_settings.MAIN_INSTANCE]=a;this._ry.identify=function(){return b.identify.apply(b,arguments)},this._ry.page=function(){return b.page.apply(b,arguments)},this._ry.profile=function(){return b.profile.apply(b,arguments)},this._ry.refreshContext=function(){return b.refreshContext.apply(b,arguments)},this._ry.sync=function(){return b.sync.apply(b,arguments)},this._ry.track=function(){return b.track.apply(b,arguments)},this._ry.trackLink=function(){return b.trackLink.apply(b,arguments)},this._ry.trackForm=function(){return b.trackForm.apply(b,arguments)},this._ry.trackSync=function(){return b.trackSync.apply(b,arguments)},this._ry.transaction=function(){return b.transaction.apply(b,arguments)}},Binder.prototype.bindAllInstances=function(){if(this._ry._q)for(var a in this._ry._q){var b=this._ry._q[a].init;_.isArrayNullOrEmpty(b)||(_.isArrayNullOrEmpty(b[0])?_logger.warn("Unable to initialize new tracker, no api key provided for tracker '"+a+"'."):(this._ry[a]=this.createTracker(b[0][0],a,_trackerStatus.pending,b[0].length>1&&b[0][1]&&_.isObject(b[0][1])?b[0][1]:null),a==_settings.MAIN_INSTANCE&&this.bindMainInstance(this._ry[a])),this._ry._q[a].init=null)}},Binder.prototype.bindAllActions=function(){if(this._ry._q){for(var a in this._ry._q){var b={},c=null;for(var d in this._ry._q[a])if(d&&_.isString(d)){var e=[];this._ry._q[a][d]&&(e=this._ry._q[a][d]);var f=!1;"init"==d||"_q"==d||"page"!=d&&"identify"!=d&&"profile"!=d&&"sync"!=d&&"track"!=d&&"transaction"!=d&&"trackLink"!=d&&"trackForm"!=d||(f=!0),f&&(b[d]=e),"_q"==d&&(c=e)}this._ry[a]&&this._ry[a].queue&&this._ry[a].queue(b,c),this._ry._q[a]=null,this._ry[a]&&this._ry[a]._enable&&this._ry[a]._enable()}this._ry._q={}}},Binder.prototype.bindAllActionsEvent=function(){if(this._instances)for(var a=0;a<this._instances.length;a++){var b=this._instances[a];b&&b._enableEvents&&b._enableEvents()}},Binder.prototype.bindAllActionsScroll=function(){if(this._instances)for(var a=0;a<this._instances.length;a++){var b=this._instances[a];b&&b._syncScroll&&b._syncScroll()}};try{var _binder=new Binder(RY);_binder.bindAllInstances(),RY._otf=function(){try{RY._ot=1;for(var a in RY)_.isObject(RY[a])&&_.isFunction(RY[a]._disable)&&RY[a]._disable(!0)}catch(a){_logger.error("Failed to disable tracker on optout.",a)}},RY.init=function(a,b){try{var c=b?_.isObject(b)&&b.name?b.name:null:_.isString(b)?b:null;if(!a)return void _logger.warn("Unable to init tracker, invalid apiKey="+(a?a.toString():"")+".");var d=c?c:_settings.MAIN_INSTANCE;RY[d]||(RY[d]=_binder.createTracker(a,d,_trackerStatus.enabled,b&&_.isObject(b)?b:null),d==_settings.MAIN_INSTANCE&&_binder.bindMainInstance(RY[d]))}catch(b){_logger.error("Failed to init tracker with apiKey="+(a?a.toString():"")+".",b)}},_binder.bindAllInstances(),_binder.bindAllActions(),_listener.onLoaded(onDomLoaded),_listener.onScrolled(onDomScrolled)}catch(a){_logger.error("Failed to init SDK.",a)}}}(window.RY||{});
